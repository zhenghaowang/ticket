import{Q as A,a as v,b as C,c as Q,d as w,e as f,f as V,g as h,C as k}from"./ClosePopup.72bdd721.js";import{Q as x,c as F,b as B,a as D}from"./QLayout.ff1af512.js";import{j as N,r as m,a as _,m as y,t as K,q as e,p as u,F as E,ai as g,aj as i,n as $,z as S,ak as U,x as b,C as P,al as j}from"./index.579c618f.js";import{t as q}from"./tools.a913bd80.js";import{T as L}from"./ticket-a5.ad00393e.js";import"./use-dark.e02dc852.js";const z=P("div",{class:"text-h6"},"\u62A5\u9500\u5355\u540D\u79F0",-1),X=N({__name:"write-ticket",setup(H){const s=m(!1),n=m(0),r=m(""),c=m(!1),d=q(),t=_(()=>d.thirdTicket.find(l=>l.ticketKey===n.value));function p(){n.value=d.creatThirdTicket(r.value||"\u65B0\u5EFA\u62A5\u9500\u5355"),s.value=!1,r.value=""}function T(){if(!n.value)return j.create({message:"\u672A\u9009\u62E9\u62A5\u9500\u5355",position:"top"}),!1;const l=window.open(`${window.location.pathname}#/printThirdTicket/${n.value}`);l&&(l.onload=()=>{setTimeout(()=>{l==null||l.print(),l==null||l.close()},1e3)})}return(l,a)=>(y(),K(E,null,[e(x,{view:"hHh lpR fFf"},{default:u(()=>[e(F,null,{default:u(()=>[e(v,null,{default:u(()=>[e(B,{"show-if-above":"",side:"right",bordered:"",width:"300"},{default:u(()=>[e(C,{nodes:g(d).thirdTreeNode,"node-key":"nodeKey","selected-color":"orange",selected:n.value,"onUpdate:selected":a[0]||(a[0]=o=>n.value=o),"default-expand-all":""},null,8,["nodes","selected"])]),_:1}),e(v,{style:{padding:"10px"}},{default:u(()=>[e(i,{outline:"",rounded:"",color:"primary",label:"\u6253\u5370\u62A5\u9500\u5355",onClick:T}),e(i,{outline:"",rounded:"",color:"primary",label:"\u65B0\u589E\u62A5\u9500\u5355",onClick:a[1]||(a[1]=o=>s.value=!0)}),e(i,{outline:"",rounded:"",color:"primary",label:"\u5220\u9664\u62A5\u9500\u5355",onClick:a[2]||(a[2]=o=>{g(d).delThirdTicket(n.value),n.value=0})}),e(Q,{label:"\u7F16\u8F91\u6A21\u5F0F",color:"green",modelValue:c.value,"onUpdate:modelValue":a[3]||(a[3]=o=>c.value=o)},null,8,["modelValue"]),e(D,{style:{height:"90vh"}},{default:u(()=>[t.value?(y(),$(L,{key:0,"ticket-key":t.value.ticketKey,note:t.value.note,person:t.value.payee,"ticket-num":t.value.ticketNum,"item-list":t.value.itemList,"leader-note":t.value.leaderNote,"fill-date":t.value.fillDate,accounting:t.value.accounting,cashier:t.value.cashier,department:t.value.department,editable:c.value,"loan-amount":t.value.loanAmount,payee:t.value.payee,"refund-amount":t.value.refundAmount,reimburse:t.value.reimburse,reviewer:t.value.reviewer},null,8,["ticket-key","note","person","ticket-num","item-list","leader-note","fill-date","accounting","cashier","department","editable","loan-amount","payee","refund-amount","reimburse","reviewer"])):S("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(A,{modelValue:s.value,"onUpdate:modelValue":a[6]||(a[6]=o=>s.value=o),persistent:""},{default:u(()=>[e(w,{style:{"min-width":"350px"}},{default:u(()=>[e(f,null,{default:u(()=>[z]),_:1}),e(f,{class:"q-pt-none"},{default:u(()=>[e(V,{dense:"",modelValue:r.value,"onUpdate:modelValue":a[4]||(a[4]=o=>r.value=o),autofocus:"",onKeyup:U(p,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(h,{align:"right",class:"text-primary"},{default:u(()=>[b(e(i,{flat:"",label:"\u53D6\u6D88",onClick:a[5]||(a[5]=o=>r.value="")},null,512),[[k]]),b(e(i,{flat:"",label:"\u786E\u8BA4",onClick:p},null,512),[[k]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});export{X as default};
