import{aB as l,al as o}from"./index.6c619cb7.js";const h=l("ticketTreeStore",{state(){return{ticketList:[],thirdTicket:[]}},getters:{treeNode(){let e={label:"\u6211\u7684\u62A5\u9500\u5355",nodeKey:"basicNode",children:[]};return this.ticketList.forEach(t=>{var i;(i=e.children)==null||i.push({label:t.ticketName,nodeKey:t.ticketKey})}),[e]},thirdTreeNode(){let e={label:"ta\u7684\u62A5\u9500\u5355",nodeKey:"basicNode",children:[]};return this.thirdTicket.forEach(t=>{var i;(i=e.children)==null||i.push({label:t.ticketName,nodeKey:t.ticketKey})}),[e]}},actions:{updateListInfo(e,t,i,s,c){let u=this.selectedTicket(e);if(!u)return!1;let r=u[t];if(c){r[i]||(r[i]={leave:{M:"",d:"",h:"",l:""},arrive:{M:"",d:"",h:"",l:""},media:"",cost:"",peopleNum:""});let a=c.split(".");a.length===2?r[i][a[0]][a[1]]=s:r[i][a[0]]=s}else r[i]=s},updateInfo(e,t,i){let s=this.selectedTicket(e);s&&(s[t]=i)},addPage(e){let t=this.selectedTicket(e);t?t.totalPage++:o.create({position:"top",message:"\u672A\u9009\u62E9\u62A5\u9500\u5355"})},reducePage(e){let t=this.selectedTicket(e);t&&t.totalPage>1?t.totalPage--:o.create({position:"top",message:"\u672A\u9009\u62E9\u62A5\u9500\u5355\u6216\u53EA\u5269\u4E00\u9875"})},selectedTicket(e){return this.ticketList.find(t=>t.ticketKey===e)},deleteTicket(e){e||o.create({position:"top",message:"\u672A\u9009\u62E9\u62A5\u9500\u5355"});let t=this.ticketList.findIndex(i=>i.ticketKey===e);t!==-1&&this.ticketList.splice(t,1)},creatTicket(e){const t=new Date().getTime();return this.ticketList.push({ticketName:e,ticketKey:t,department:"",fillDate:"\u5E74\u6708\u65E5",person:"",project:"",reason:"",totalPage:1,trafficList:[],hotelList:[],transportList:[],otherList_1:[],otherList_2:[],otherList_3:[]}),t},creatThirdTicket(e){const t=new Date().getTime();return this.thirdTicket.push({accounting:"",cashier:"",department:"",fillDate:"\u5E74\u6708\u65E5",itemList:[],leaderNote:"",loanAmount:"",note:"",payee:"",refundAmount:"",reimburse:"",reviewer:"",ticketKey:t,ticketName:e,ticketNum:""}),t},delThirdTicket(e){e||o.create({position:"top",message:"\u672A\u9009\u62E9\u62A5\u9500\u5355"});let t=this.thirdTicket.findIndex(i=>i.ticketKey===e);t!==-1&&this.thirdTicket.splice(t,1)},updThirdTicket(e,t,i){let s=this.thirdTicket.find(c=>c.ticketKey===e);if(!s)return!1;s[t]=i},updThirdList(e,t,i,s){let c=this.thirdTicket.find(u=>u.ticketKey===e);if(!c)return!1;c.itemList[t]||(c.itemList[t]={amount:"",name:"",summary:""}),c.itemList[t][i]=s}},persist:{paths:["ticketList","thirdTicket"]}});export{h as t};
